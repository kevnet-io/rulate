name: "wardrobe_rules_v1"
version: "1.0.0"
description: "Compatibility rules for wardrobe items"
schema_ref: "wardrobe_v1"

rules:
  # EXCLUSION RULES - Items are INCOMPATIBLE if these conditions are true

  - name: "same_body_zone_exclusion"
    type: "exclusion"
    description: "Cannot wear two items on same body zone unless they're different layers"
    enabled: true
    condition:
      all:
        - equals:
            field: "body_zone"
        - not:
            has_different:
              field: "layer"

  - name: "same_category_exclusion"
    type: "exclusion"
    description: "Cannot wear two items of the exact same category"
    enabled: true
    condition:
      equals:
        field: "category"

  # REQUIREMENT RULES - Items are ONLY compatible if these conditions are true

  - name: "formality_matching"
    type: "requirement"
    description: "Formality levels must be within 2 points of each other"
    enabled: true
    condition:
      or:
        - any_missing:
            field: "formality"
        - abs_diff:
            field: "formality"
            max: 2

  - name: "season_compatibility"
    type: "requirement"
    description: "Items should be appropriate for the same season"
    enabled: true
    condition:
      or:
        - any_missing:
            field: "season"
        - equals:
            field: "season"
        - any_equals:
            field: "season"
            value: "all_season"
