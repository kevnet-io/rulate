name: "wardrobe_cluster_rules_v2"
version: "2.0.0"
description: "Outfit-level aesthetic compatibility rules (moved from pairwise rules)"
schema_ref: "wardrobe_v2"
pairwise_ruleset_ref: "wardrobe_rules_v2"

rules:
  # REQUIREMENT RULES - What a valid outfit must satisfy

  - name: "minimum_outfit_size"
    type: "requirement"
    enabled: true
    description: "An outfit must have at least 2 items"
    condition:
      min_cluster_size: 2

  - name: "formality_consistency"
    type: "requirement"
    enabled: true
    description: "All items must be within 1 formality level of each other"
    condition:
      formality_range:
        max_diff: 1

  - name: "season_consistency"
    type: "requirement"
    enabled: true
    description: "All items should be appropriate for the same season or be all-season"
    condition:
      or:
        - unique_values:
            field: "season"
            max: 1
        - has_item_with:
            field: "season"
            value: "all_season"

  # EXCLUSION RULES - What makes a set invalid as an outfit

  - name: "max_outfit_size"
    type: "exclusion"
    enabled: true
    description: "An outfit can't have more than 10 items (too complex)"
    condition:
      not:
        max_cluster_size: 10
